<!DOCTYPE html>
<html>
  <head>
    <title>RailsScaffold</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "tailwind", "inter-font", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>
  <body>
    <main class="h-screen mx-auto">
      <% if notice.present? || alert.present? %>
        <% notice_colour = notice.present? ? "green" : "red" %>
        <% notice_id = notice.present? ? "notice" : "alert" %>
        <div id="<%=notice_id%>" class="absolute top-2 right-0 flex items-center rounded-l-lg xl:max-w-sm shadow-lg bg-<%=notice_colour%>-100 border-l-4 border-<%=notice_colour%>-500 text-sm text-<%=notice_colour%>-700 p-4 ml-4"  role="alert">
          <span>
            <%= notice || alert %>
          </span>
          <button type="button" class="ml-auto -mx-1.5 -my-1.5 bg-<%=notice_colour%>-100 text-<%=notice_colour%>-500 rounded-lg focus:ring-2 focus:ring-<%=notice_colour%>-400 p-1.5 hover:bg-<%=notice_colour%>-200 inline-flex items-center justify-center h-8 w-8 dark:bg-gray-800 dark:text-<%=notice_colour%>-400 dark:hover:bg-gray-700" data-dismiss-target="#<%=notice_id%>" onclick="dismissAlert('<%=notice_id%>')" aria-label="Close">
            <span class="sr-only">Close</span>
            <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
            </svg>
          </button>
        </div>
      <% end %>
      <%= yield %>
    </main>
  </body>
</html>
<script>
  document.addEventListener("turbo:load", function() {
    setInterval(() => {
      dismissAlert("notice");
      dismissAlert("alert");

    }, 3000);

  })

  function dismissAlert(alertId) {
    var alertElement = document.getElementById(alertId);
    if (alertElement) {
      alertElement.style.display = "none";
    }
  }
</script>
